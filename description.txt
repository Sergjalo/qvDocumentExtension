Для чего это расширение?
	
	Приложение использует ajax представление QlikView документов.
	Заказчик хочет расположить все основные элементы на странице под заголовком страницы, содержащим основное меню с фильтрами. 
	При загрузке страницы меню не должно быть видно - видна только кнопка по которой оно появляется.
	При показе меню появляется несколько панелей между "шапкой" документа (началом страницы) и всеми основными элементами.
	То есть все элементы сдвигаются вниз, оказывясь под панелью меню.
	Меню должно содержать элементы, при нажатии на которые появляются новые вложенные панели, а все что под ними "съезжает" ниже.
	При сворачивании любой вложенной в основное меню панели или при закрытии всей панели фильтров все элементы сдвигаются вверх.

Как это реализовано.
	
	Документное расширение - это файл FilterPaneEPAM.qar, который является zip архивом.
	При его установке в c:\Users\_USER_\AppData\Local\QlikTech\QlikView\Extensions\Document\ появится папка FilterPaneEPAM\
	В файле Script.js содержится javascript код, который будет загружен перед загрузкой страницы.
	Чтобы привязать к документу расширение нужно открыть документ, в Settings - Document Properties - Extensions добавить его из списка доступных.
	
	Расширение создает массив ссылок на некоторые элементы на странице, ориентируясь на их названия (ObjectID).
	На уровне javascript на некоторые элементы назначаются действия. 
	При нажатии на эти элементы расширение определяет чему они принадлежат и тип действия. 
	Действием может быть показ/скрытие меню фильтров или сворачивание/разворачивание панели/панелей
	Для того чтобы расширение могло корректно работать элементы, потенциально изменяющие свое положение должны быть
	названы по специальному шаблону.
	Кроме того нужно создать несколько переменных, названных по шаблону.
	
	При щелчке на кнопку ответственную за разворот панели расширение 
	- определяет текущую панель
	- определяет все элементы, находящиеся под ней
	- опускает/поднимает эти элементы на высоту панели
	- показывает/скрывает текущую панель

Подробности реализации.
	
	точка входа - Qva.AddDocumentExtension('FilterPaneEPAM', function(){ ...
		в ней добавляется расширение, добавляются стили (для этого расширения это не существенно), и в $('document').ready производится 
		первичная инициализация всех необходимых объектов.
	Получаем ссылку на текущий документ	docQv = Qv.GetCurrentDocument();
	В docQv.SetOnUpdateComplete описываем что будет происходить после того как все видимые объекты документа будут добавлены на страницу.
		важно чтобы эти действия были выполнены один раз за показ страницы, так как событие SetOnUpdateComplete возникает много раз за время работы со страницей.
	Основной объект расширения - qvObjectsList. Он инициализируется конструктором ElementsList().
	Важным является то что для правильной работы конструктора все элементы должны быть видимыми, чтобы получилось собрать информацию об их расположении, которую 
	можно будет использовать для перемещения объектов. Но QlikView для скрытых элементов не просто делает 'display'=none, но и позицию и высоту ставит в 0.
	Поэтому до инициализации устанавливаются некоторые переменные чтобы все скрытые элементы были показаны. 
	После инициализации устанавливаются некоторые переменные чтобы скрытые элементы остались скрытыми, а все панели свернулись и панель фильтров скрылась.

	конструктор ElementsList() создает объект главными свойствами которого являются -
	elem - массив всех подлежащих перемещению объектов. Каждый элемент - объект со свойствами среди которых название, id html элемента, номер "панели" и "основной панели"
	panels - массив "панелей" которые будут сворачиваться/разворачиваться вызывая сдвиг нижестоящих элементов. Имеют заголовки и основное тело.
	mainPanels - массив "основных панелей" (суперпанели) - панели содержащие несколько обычных панелей. 
	Панель это не что-то визуальное, это набор элементов у которых в названии есть общий номер панели.
	То же и суперпанель - набор элементов у которых в названии есть общий номер суперпанели.
	
	Структура приблизительно такова -
	MainPanel_0_body 
		panel_0_body	(набор элементов который при показе MainPanel_0 показывается всегда и не сворачивается/разворачивается, а только исчезает/показ. при скрытии/развороте всей панели)
		panel_1_header	(в этом наборе элементов содержится кнопка для сворачивания/разворачивания панели panel_1 и те элементы которые все равно будут видны когда панель свернута)
		panel_1_body	(набор элементов который будет показан/скрыт по щелчку на кнопке в заголовке панели)	
		panel_2_header	
		panel_2_body		
	MainPanel_1_body	(набор элементов основной страницы. Все что находится ниже фильтров)
	Обычно суперпанелей 2. Но чтобы можно было легко вставить новые и панели и суперпанели лучше нумеровать через 10. - 10, 20, 30...
	
	Чтобы объект был создан правильно и массивы elem, panels, mainPanels заполнились нужно чтобы элементы были названы по шаблону. 
	p-MAINPANELNUM pan-PANELNUM anyTextForObjectType-ELEMENTNUM
	например 
		p-10 pan-50 txt-0		элемент типа txt на 5й панели 10й суперпанели. Номер элемента 0
		p-10 pan-50 cmb-2		элемент номер 2 типа txt на 50й панели 10й суперпанели. 
		p-10 pan-50 ch-2		элемент номер 2 типа txt на 50й панели 10й суперпанели. 
	номер элемента не важен, нужен лишь для того чтобы название было уникальным.
	
	Чтобы подсказать расширению что на элемент должно быть назначено действие его тип должен быть butAction или butMainAction.
	butAction - действие на разворот соответствующей панели
	butMainAction - действие на разворот соответствующей суперпанели
	например 
		p-10 pan-70 butAction-0			элемент к которому будет привязано действие по сворачиванию/разворачиванию 70й панели 10й суперпанели.
		p-10 pan-70 butMainAction-0		элемент к которому будет привязано действие по сворачиванию/разворачиванию 10й суперпанели.
	
	В документе должны быть определены по числу панелей переменные с названиями vShiftSign_MAINPANELN_PANELN
	например
		vShiftSign_10_70 для 70й панели 10й суперпанели.
		vShiftSign_20_30 для 30й панели 20й суперпанели.
	и по числу суперпанелей переменные с названиями vShiftSignMain_MAINPANELN
	например
		vShiftSignMain_1 для 10й суперпанели.
		
	Если на какой либо из панелей есть элементы которые по логике работы не должны быть показаны и скрыты в выражении Show conditions,
	то во все эти выражения нужно добавить vShowSwitch or ( исходное_условие ). Чтобы при установке переменной vShowSwitch в true все стало видимым,
	а при false - вернулось исходное условие. 
	Такой трюк применяется при инициализации главного объекта qvObjectsList для получения параметров скрытых элементов.
	
	Если нужно чтобы в один момент времени только одна панель была развернута, а все остальные свернулись при ее развороте нужно определить переменную 
	vShiftOnlyOne и установить ее в 1. После чего сохранить п
	
Комментарии к построению кода.
	
	...
	
	
		
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
		